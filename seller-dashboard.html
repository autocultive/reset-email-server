<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Seller Dashboard | AUTOCULTIVE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Teko:wght@600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #0f0f0f;
      color: white;
    }

    .glass {
      backdrop-filter: blur(6px);
      background-color: rgba(17, 17, 17, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .brand {
      font-family: 'Teko', sans-serif;
    }

    table {
      width: 100%;
    }

    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #444;
    }

    th {
      background-color: #1f1f1f;
    }
  </style>
</head>
<body>

<!-- üîí Auth Check -->
<script>
  const seller = JSON.parse(localStorage.getItem("loggedInSeller"));
  if (!seller) {
    alert("‚õî Please login as a seller.");
    window.location.href = "seller-login.html";
  }
</script>

<!-- üîß Header -->
<header class="bg-black border-b border-gray-800 py-4 px-6 flex items-center justify-center sticky top-0 z-50 relative">
  <a href="index.html" class="absolute left-6 text-yellow-300 text-sm font-semibold hover:text-yellow-200 transition">‚Üê Back to Site</a>
  <span class="text-2xl md:text-3xl font-extrabold text-yellow-400 uppercase tracking-[0.25em] animate-pulse drop-shadow-[0_0_5px_#facc15] brand">AUTOCULTIVE</span>
</header>

<!-- üõ†Ô∏è Layout -->
<div class="flex flex-col lg:flex-row">

  <!-- üìö Sidebar -->
  <aside class="w-full lg:w-64 bg-gray-900 p-6 border-r border-gray-800">
    <div class="mb-6 space-y-1">
      <p class="text-sm text-gray-400">üëã Logged in as:</p>
      <p class="text-yellow-400 font-bold text-base" id="sellerName"></p>
      <p class="text-gray-500 text-sm" id="sellerEmail"></p>
    </div>
    <nav class="space-y-4">
      <a href="#" class="block text-yellow-400 font-semibold hover:text-yellow-300">üìä Dashboard</a>
      <a href="upload.html" class="block text-white hover:text-yellow-300">‚¨ÜÔ∏è Upload Product</a>
      <a href="#" class="block text-white hover:text-yellow-300">üì¶ My Products</a>
      <a href="#" onclick="logoutSeller()" class="block text-white hover:text-yellow-300">üö™ Logout</a>
    </nav>
  </aside>

  <!-- üì¶ Main Content -->
  <main class="flex-1 p-6">
    <h2 class="text-3xl font-bold text-yellow-400 mb-2">Welcome to Your Seller Dashboard üëã</h2>
    <p class="text-gray-400 mb-8">Manage your products and track performance.</p>

    <!-- üìä Stats -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <div class="glass p-5 rounded-xl shadow-lg border border-gray-700">
        <h3 class="text-lg text-gray-300 mb-2">Your Products</h3>
        <p class="text-3xl font-bold text-yellow-400" id="productCount">0</p>
      </div>
      <div class="glass p-5 rounded-xl shadow-lg border border-gray-700">
        <h3 class="text-lg text-gray-300 mb-2">Orders</h3>
        <p class="text-3xl font-bold text-yellow-400">--</p>
      </div>
      <div class="glass p-5 rounded-xl shadow-lg border border-gray-700">
        <h3 class="text-lg text-gray-300 mb-2">Pending</h3>
        <p class="text-3xl font-bold text-yellow-400">--</p>
      </div>
    </div>

    <!-- ‚ûï Upload Shortcut -->
    <div class="text-right mb-4">
      <a href="upload.html" class="inline-block px-6 py-3 bg-yellow-400 text-black font-semibold rounded hover:bg-yellow-300 transition">
        + Upload New Product
      </a>
    </div>

    <!-- üì¶ Product Table -->
    <div class="glass p-6 rounded-xl border border-gray-700 overflow-x-auto">
      <h3 class="text-xl font-bold text-yellow-400 mb-4">üì¶ Your Uploaded Products</h3>
      <table class="text-sm text-white">
        <thead>
          <tr>
            <th>Product</th>
            <th>Category</th>
            <th>‚Çπ Price</th>
            <th>Description</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="productList">
          <!-- Products will be injected here -->
        </tbody>
      </table>
    </div>
  </main>
</div>

<!-- üö™ Script Section -->
<script>
  const uploads = JSON.parse(localStorage.getItem("uploads")) || [];
  const myProducts = uploads.filter(p => p.sellerEmail === seller.email);

  document.getElementById("sellerName").innerText = seller.name;
  document.getElementById("sellerEmail").innerText = seller.email;
  document.getElementById("productCount").innerText = myProducts.length;

  function logoutSeller() {
    localStorage.removeItem("loggedInSeller");
    alert("üëã Logged out.");
    window.location.href = "seller-login.html";
  }

  function deleteProduct(id) {
    const updated = uploads.filter(p => p.id !== id);
    localStorage.setItem("uploads", JSON.stringify(updated));
    location.reload();
  }

  const productList = document.getElementById("productList");
  if (myProducts.length === 0) {
    productList.innerHTML = `<tr><td colspan="5" class="text-center py-4 text-gray-400">No products uploaded yet.</td></tr>`;
  } else {
    myProducts.forEach(p => {
      productList.innerHTML += `
        <tr>
          <td>${p.name}</td>
          <td>${p.category}</td>
          <td>‚Çπ${p.price}</td>
          <td>${p.description}</td>
          <td><button onclick="deleteProduct(${p.id})" class="text-red-400 hover:underline">Delete</button></td>
        </tr>
      `;
    });
  }
</script>

</body>
</html>
