<!-- Save this as category.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Car Parts Marketplace</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@600&family=Teko:wght@600&display=swap" rel="stylesheet" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(to bottom, #0d0d0d, #1a1a1a);
      color: #e5e7eb;
    }
    nav a {
      color: #facc15;
    }
    nav a:hover {
      color: #fbbf24;
      text-shadow: 0 0 5px #fbbf24, 0 0 10px #fbbf24;
    }
    header {
      background: #1f2937;
      color: #facc15;
      border-bottom: 2px solid #374151;
    }
    input[type="text"] {
      background: #0f172a;
      color: #facc15;
      border-color: #374151;
    }
    input[type="text"]::placeholder {
      color: #9ca3af;
    }
    #user-dropdown {
      opacity: 0;
      visibility: hidden;
    }
    #user-dropdown.visible {
      opacity: 1;
      visibility: visible;
    }
    #user-avatar {
      animation: glowPulse 2s infinite;
    }
    @keyframes glowPulse {
      0% {
        box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.5);
      }
      70% {
        box-shadow: 0 0 0 12px rgba(250, 204, 21, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(250, 204, 21, 0);
      }
    }
  </style>
</head>
<body class="text-gray-100 bg-gradient-to-b from-gray-900 to-black">
  <header class="shadow sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex flex-col md:flex-row items-center justify-between gap-4">
      <a href="index.html" class="flex items-center px-10 py-1 md:px-12 md:py-2">
        <span class="text-xl md:text-2xl font-extrabold text-yellow-400 uppercase tracking-[0.25em] relative top-[2px] animate-pulse drop-shadow-[0_0_5px_#facc15]" style="font-family: 'Teko', sans-serif;">AUTOCULTIVE</span>
      </a>
      <div class="w-full md:w-1/2 relative">
        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-yellow-300 text-lg">ğŸ”</span>
        <input id="searchInput" type="text" placeholder="Search car accessories..." class="w-full pl-10 pr-4 py-2 border rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm" />
      </div>
      <nav class="flex items-center gap-4 text-sm whitespace-nowrap">
        <a href="index.html">ğŸ  Home</a>
        <a href="wishlist.html">â¤ï¸ Wishlist</a>
        <a href="cart.html">ğŸ›’ Cart</a>
        <a href="login.html" id="login-link" class="text-yellow-400 hover:text-yellow-300 transition">ğŸ” Login</a>
        <div id="user-info" class="hidden relative ml-2">
          <div class="relative inline-block" id="avatar-container">
            <img id="user-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=autocultive" class="w-10 h-10 rounded-full ring-2 ring-yellow-400 shadow-xl cursor-pointer hover:scale-110 transition-transform duration-300 animate-pulse" alt="User Avatar" />
            <div id="user-dropdown" class="absolute right-0 mt-3 w-64 rounded-2xl bg-black/90 backdrop-blur-md border border-yellow-500 shadow-2xl transition-all duration-300 ease-in-out opacity-0 invisible z-50">
              <div class="px-4 py-4 border-b border-yellow-600">
                <div id="user-email" class="text-yellow-300 font-semibold truncate">customer@mail.com</div>
              </div>
              <a href="orders.html" class="flex items-center gap-2 px-4 py-3 text-sm text-white hover:bg-yellow-700/30 transition">ğŸ› <span>My Orders</span></a>
              <button onclick="logout()" class="flex items-center gap-2 w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-red-700/40 transition">ğŸšª <span>Logout</span></button>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <div class="text-center py-3 font-medium shadow-lg text-sm sm:text-base font-orbitron hover:scale-110 transition-transform duration-300" data-aos="fade-down">
    ğŸš— Unleash Your Drive â€“ Premium Upgrades for True Gearheads!
  </div>

  <div class="max-w-7xl mx-auto px-4 mt-2">
    <a href="index.html" class="inline-block text-sm font-semibold text-yellow-300 hover:text-yellow-400 underline transition duration-200">â† Back to Home</a>
  </div>

  <section class="relative mb-10">
    <img id="heroImage" class="w-full h-60 object-cover" />
    <div class="absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center">
      <h1 id="tagline" class="text-yellow-300 text-3xl md:text-4xl font-bold text-center px-4 drop-shadow-xl"></h1>
    </div>
  </section>

  <main class="max-w-7xl mx-auto px-4 py-12">
    <h2 id="categoryTitle" class="text-3xl font-bold mb-6 text-yellow-300 text-center">Loading Category...</h2>
    <div id="productGrid" class="grid gap-8 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"></div>
  </main>

  <footer class="border-t mt-16 py-6 shadow-inner">
    <div class="max-w-7xl mx-auto text-center text-sm">Â© 2025 CarParts Market. All rights reserved. | Built with ğŸš— passion</div>
  </footer>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>AOS.init();</script>

  <!-- Firebase Auth Script -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCt7256M7ocWrUk1BKXEhkwAbXxTQzoaEE",
      authDomain: "autocultive-b70df.firebaseapp.com",
      projectId: "autocultive-b70df",
      appId: "1:567543720829:web:682f549c40773ff3b5ba14"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    document.addEventListener("DOMContentLoaded", () => {
      const loginLink = document.getElementById("login-link");
      const userInfo = document.getElementById("user-info");
      const userEmail = document.getElementById("user-email");

      auth.onAuthStateChanged(user => {
        if (user) {
          userEmail.textContent = user.email ?? "Account";
          userInfo.classList.remove("hidden");
          loginLink.classList.add("hidden");
        } else {
          userInfo.classList.add("hidden");
          loginLink.classList.remove("hidden");
        }
      });

      document.addEventListener("click", (e) => {
        const avatar = document.getElementById("avatar-container");
        const dropdown = document.getElementById("user-dropdown");
        if (avatar.contains(e.target)) {
          dropdown.classList.toggle("visible");
          dropdown.classList.toggle("opacity-0");
          dropdown.classList.toggle("invisible");
        } else {
          dropdown.classList.remove("visible", "opacity-100");
          dropdown.classList.add("invisible", "opacity-0");
        }
      });
    });

    function logout() {
      auth.signOut().then(() => {
        alert("ğŸ‘‹ Logged out!");
        location.reload();
      });
    }
  </script>

  <!-- Category Data Load Script -->
  <script type="module">
    import { products } from './data.js';

    const categoryMap = {
      "all": {
        tagline: "Explore everything for your car in one place.",
        heroImage: "images/categories/all.jpg",
        match: "Everything for Your Ride"
      },
      "performance-upgrades": {
        tagline: "Unleash the Beast Under Your Hood.",
        heroImage: "images/categories/performance.jpg",
        match: "Performance Upgrades"
      },
      "body-kits-custom-styling": {
        tagline: "Transform Stock to Street Legend.",
        heroImage: "images/categories/bodykits.jpg",
        match: "Body Kits & Custom Styling"
      },
      "lighting-mods": {
        tagline: "Light Up the Road. Own the Night.",
        heroImage: "images/categories/lighting.jpg",
        match: "Lighting Mods"
      },
      "smart-tech-infotainment": {
        tagline: "Smarter, Safer, Sleeker Drives.",
        heroImage: "images/categories/infotainment.jpg",
        match: "Smart Tech & Infotainment"
      },
      "detailing-shine-garage": {
        tagline: "Make Every Drive Look Showroom Fresh.",
        heroImage: "images/categories/detailing.jpg",
        match: "Detailing & Shine Garage"
      },
      "interior-mods-comfort": {
        tagline: "Where Comfort Meets Custom.",
        heroImage: "images/categories/interior.jpg",
        match: "Interior Mods & Comfort"
      },
      "hidden-essentials": {
        tagline: "Small Upgrades. Big Difference.",
        heroImage: "images/categories/essentials.jpg",
        match: "Hidden Essentials"
      }
    };

    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const rawCategory = params.get("category") || "all";
      const categoryKey = decodeURIComponent(rawCategory).trim().toLowerCase();
      const categoryInfo = categoryMap[categoryKey] || categoryMap["all"];

      document.getElementById("heroImage").src = categoryInfo.heroImage;
      document.getElementById("tagline").textContent = categoryInfo.tagline;
      document.getElementById("categoryTitle").textContent = categoryInfo.match;

      const grid = document.getElementById("productGrid");
      const filtered = categoryKey === "all"
        ? products
        : products.filter(p =>
            p.category.trim().toLowerCase().replace(/[\s&]+/g, "-") === categoryKey
          );

      if (filtered.length === 0) {
        grid.innerHTML = `<p class="text-center col-span-full text-yellow-400 text-lg">ğŸš« No products found in this category.</p>`;
        return;
      }

      filtered.forEach(p => {
        const card = document.createElement("div");
        card.className = "product-card rounded-2xl p-5 flex flex-col justify-between bg-gray-800 border border-yellow-500";
        card.innerHTML = `
          <img src="${p.image}" alt="${p.name}" class="h-40 w-full object-cover rounded mb-4">
          <h3 class="text-lg font-semibold text-yellow-300">${p.name}</h3>
          <p class="text-sm text-gray-400">${p.category}</p>
          <p class="mt-2 text-lg font-bold text-white">â‚¹${p.price}</p>
          <a href="product.html?id=${p.id}" class="inline-block text-center mt-3 px-4 py-2 rounded-md text-sm font-semibold text-yellow-400 border border-yellow-400 hover:bg-yellow-400 hover:text-black transition shadow">ğŸ” More Details</a>
          <div class="flex justify-between gap-2 mt-4">
            <button onclick='addToCart(${JSON.stringify(p)})' class="bg-yellow-500 text-black w-full py-2 rounded-md hover:bg-yellow-400 transition">Add to Cart</button>
            <button onclick='addToWishlist(${JSON.stringify(p)})' class="bg-pink-500 text-white px-3 rounded-md hover:bg-pink-600">â¤ï¸</button>
          </div>
        `;
        grid.appendChild(card);
      });
    });

    function addToCart(product) {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.push(product);
      localStorage.setItem("cart", JSON.stringify(cart));
      alert("âœ… Added to Cart");
    }

    function addToWishlist(product) {
      const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
      wishlist.push(product);
      localStorage.setItem("wishlist", JSON.stringify(wishlist));
      alert("â¤ï¸ Added to Wishlist");
    }
  </script>
</body>
</html>
