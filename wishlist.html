<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Wishlist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@600&family=Teko:wght@600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #000;
      color: white;
    }
    h1, h2 {
      font-family: 'Orbitron', sans-serif;
    }
    nav a {
      color: #facc15;
    }
    nav a:hover {
      color: #fbbf24;
      text-shadow: 0 0 5px #fbbf24, 0 0 10px #fbbf24;
    }
    .hero-banner {
      background-image: url('images/banner/performance-car.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      height: 280px;
      position: relative;
    }
    .hero-overlay {
      background-color: rgba(0, 0, 0, 0.6);
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: 1;
    }
    .hero-content {
      position: relative;
      z-index: 2;
    }
    #user-dropdown {
      opacity: 0;
      visibility: hidden;
    }
    #user-dropdown.visible {
      opacity: 1;
      visibility: visible;
    }
    #user-avatar {
      animation: glowPulse 2s infinite;
    }
    @keyframes glowPulse {
      0% { box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.5); }
      70% { box-shadow: 0 0 0 12px rgba(250, 204, 21, 0); }
      100% { box-shadow: 0 0 0 0 rgba(250, 204, 21, 0); }
    }
  </style>
</head>
<body class="antialiased">

  <!-- ‚úÖ Navigation Bar -->
  <header class="shadow sticky top-0 z-50 bg-black border-b border-gray-800">
    <div class="max-w-7xl mx-auto px-4 py-4 flex flex-col md:flex-row items-center justify-between gap-4">
      <a href="index.html" class="flex items-center px-10 py-1 md:px-12 md:py-2">
        <span class="text-xl md:text-2xl font-extrabold text-yellow-400 uppercase tracking-[0.25em] relative top-[2px] animate-pulse drop-shadow-[0_0_5px_#facc15]" style="font-family: 'Teko', sans-serif;">AUTOCULTIVE</span>
      </a>

      <div class="w-full md:w-1/2 relative">
        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-yellow-300 text-lg">üîç</span>
        <input id="searchInput" type="text" placeholder="Search car accessories..." onkeyup="searchProducts()" class="w-full pl-10 pr-4 py-2 border rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm bg-black text-yellow-300 border-gray-600 placeholder-gray-500" />
      </div>

      <nav class="flex items-center gap-4 text-sm whitespace-nowrap">
        <a href="index.html">üè† Home</a>
        <a href="wishlist.html">‚ù§Ô∏è Wishlist</a>
        <a href="cart.html">üõí Cart</a>
        <a href="login.html" id="login-link" class="text-yellow-400 hover:text-yellow-300 transition">üîê Login</a>

        <div id="user-info" class="hidden relative ml-2">
          <div class="relative inline-block" id="avatar-container">
            <img id="user-avatar"
              src="https://api.dicebear.com/7.x/avataaars/svg?seed=autocultive"
              class="w-10 h-10 rounded-full ring-2 ring-yellow-400 shadow-xl cursor-pointer hover:scale-110 transition-transform duration-300 animate-pulse"
              alt="User Avatar" />
            <div id="user-dropdown"
              class="absolute right-0 mt-3 w-64 rounded-2xl bg-black/90 backdrop-blur-md border border-yellow-500 shadow-2xl transition-all duration-300 ease-in-out opacity-0 invisible z-50">
              <div class="px-4 py-4 border-b border-yellow-600">
                <div id="user-email" class="text-yellow-300 font-semibold truncate">customer@mail.com</div>
              </div>
              <a href="orders.html" class="flex items-center gap-2 px-4 py-3 text-sm text-white hover:bg-yellow-700/30 transition">üõç <span>My Orders</span></a>
              <button onclick="logout()" class="flex items-center gap-2 w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-red-700/40 transition">üö™ <span>Logout</span></button>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- ‚ù§Ô∏è Wishlist Title -->
  <div class="max-w-6xl mx-auto px-4 py-5 flex justify-between items-center border-b border-gray-800 mt-2">
    <h1 class="text-3xl font-bold text-yellow-400 tracking-tight">‚ù§Ô∏è Your Wishlist</h1>
    <a href="index.html" class="text-yellow-300 hover:underline text-base">‚Üê Back to Shop</a>
  </div>

  <!-- üåü Hero Banner -->
  <section class="hero-banner flex items-center justify-center text-center text-white mt-4">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h2 class="text-4xl md:text-5xl font-extrabold text-yellow-400">Curate Your Dream Garage</h2>
    </div>
  </section>

  <!-- üíñ Wishlist Items -->
  <div class="max-w-6xl mx-auto px-4 py-12 relative z-10 bg-gray-900 bg-opacity-80 rounded-xl shadow-xl mt-10">
    <div id="wishlist-items" class="space-y-6"></div>
    <div id="wishlist-footer" class="mt-12 text-right hidden">
      <button onclick="clearWishlist()" class="px-6 py-3 bg-red-600 text-white text-sm font-semibold rounded-lg hover:bg-red-700 transition">
        üóëÔ∏è Clear Wishlist
      </button>
    </div>
  </div>

  <!-- üîª Footer -->
  <footer class="bg-black text-white text-center py-6 mt-16 border-t border-gray-800">
    <p class="text-sm">&copy; 2025 CarParts Marketplace. Engineered with ‚öôÔ∏è & passion.</p>
  </footer>

  <!-- ‚úÖ Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCt7256M7ocWrUk1BKXEhkwAbXxTQzoaEE",
      authDomain: "autocultive-b70df.firebaseapp.com",
      projectId: "autocultive-b70df",
      appId: "1:567543720829:web:682f549c40773ff3b5ba14"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    auth.onAuthStateChanged(user => {
      const loginLink = document.getElementById("login-link");
      const userInfo = document.getElementById("user-info");
      const userEmail = document.getElementById("user-email");

      if (user) {
        if (userEmail) userEmail.textContent = user.email ?? "Account";
        if (userInfo) userInfo.classList.remove("hidden");
        if (loginLink) loginLink.classList.add("hidden");
      } else {
        if (userInfo) userInfo.classList.add("hidden");
        if (loginLink) loginLink.classList.remove("hidden");
      }
    });

    function logout() {
      auth.signOut().then(() => {
        alert("üëã Logged out!");
        location.reload();
      });
    }
  </script>

  <!-- Dropdown Toggle -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const avatarContainer = document.getElementById("avatar-container");
      const dropdown = document.getElementById("user-dropdown");

      document.addEventListener("click", (e) => {
        if (avatarContainer.contains(e.target)) {
          dropdown.classList.toggle("visible");
          dropdown.classList.toggle("opacity-100");
          dropdown.classList.toggle("invisible");
          dropdown.classList.toggle("opacity-0");
        } else {
          dropdown.classList.remove("visible", "opacity-100");
          dropdown.classList.add("invisible", "opacity-0");
        }
      });
    });
  </script>

  <!-- Wishlist Script (unchanged) -->
  <script>
    function renderWishlist() {
      const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
      const container = document.getElementById("wishlist-items");
      const footer = document.getElementById("wishlist-footer");
      container.innerHTML = "";

      if (wishlist.length === 0) {
        container.innerHTML = `<div class="text-center mt-20 text-gray-400 text-lg">üíî Your wishlist is empty.</div>`;
        footer.classList.add("hidden");
        return;
      }

      footer.classList.remove("hidden");

      wishlist.forEach((item, index) => {
        const card = document.createElement("div");
        card.className = "bg-gray-800 rounded-xl shadow-md p-6 grid grid-cols-1 sm:grid-cols-3 gap-4 items-center hover:shadow-yellow-400 transition";
        card.innerHTML = `
          <img src="${item.image}" alt="${item.name}" class="w-24 h-24 object-cover rounded-lg">
          <div>
            <h2 class="text-xl font-semibold text-yellow-400">${item.name}</h2>
            <p class="text-sm text-gray-400">${item.category}</p>
            <p class="text-lg font-bold text-white mt-1">‚Çπ${item.price}</p>
            <button onclick="moveToCart(${index})" class="mt-2 text-sm text-yellow-300 hover:underline">üõí Move to Cart</button>
          </div>
          <div class="flex sm:justify-end items-start">
            <button onclick="removeItem(${index})" class="text-red-400 hover:underline text-sm font-medium">Remove</button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function moveToCart(index) {
      const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
      const item = wishlist[index];
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.push(item);
      localStorage.setItem("cart", JSON.stringify(cart));
      wishlist.splice(index, 1);
      localStorage.setItem("wishlist", JSON.stringify(wishlist));
      renderWishlist();
    }

    function removeItem(index) {
      let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
      wishlist.splice(index, 1);
      localStorage.setItem("wishlist", JSON.stringify(wishlist));
      renderWishlist();
    }

    function clearWishlist() {
      localStorage.removeItem("wishlist");
      renderWishlist();
    }

    function searchProducts() {
      const query = (document.getElementById("searchInput").value || "").toLowerCase();
      const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
      const filtered = wishlist.filter(p => p.name.toLowerCase().includes(query) || p.category.toLowerCase().includes(query));
      displayFilteredWishlist(filtered);
    }

    function displayFilteredWishlist(filtered) {
      const container = document.getElementById("wishlist-items");
      container.innerHTML = "";

      if (filtered.length === 0) {
        container.innerHTML = `<div class="text-center text-gray-500 mt-6">No matching products found.</div>`;
        return;
      }

      filtered.forEach((item, index) => {
        const card = document.createElement("div");
        card.className = "bg-gray-800 rounded-xl shadow-md p-6 grid grid-cols-1 sm:grid-cols-3 gap-4 items-center hover:shadow-yellow-400 transition";
        card.innerHTML = `
          <img src="${item.image}" alt="${item.name}" class="w-24 h-24 object-cover rounded-lg">
          <div>
            <h2 class="text-xl font-semibold text-yellow-400">${item.name}</h2>
            <p class="text-sm text-gray-400">${item.category}</p>
            <p class="text-lg font-bold text-white mt-1">‚Çπ${item.price}</p>
          </div>
          <div class="flex sm:justify-end items-start">
            <button onclick="removeItem(${index})" class="text-red-400 hover:underline text-sm font-medium">Remove</button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    renderWishlist();
  </script>
</body>
</html>
